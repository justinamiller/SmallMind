=== SmallMind Allocation Profiler ===
Runtime: .NET 10.0.2
OS: Unix 6.11.0.1018
Processor Count: 4

--- MatMul Backward Pass Allocation Profile ---
This benchmark measures allocation reduction from using ArrayPool
for temporary gradient buffers in MatMul backward pass.

Matrix dimensions: 128×256 @ 256×128 = 128×128
Iterations: 100
Total time: 330ms
Avg time per iteration: 3.300ms

Memory Metrics:
  Total allocations: 13.18 MB
  Allocations per iteration: 135.00 KB
  Gen0 Collections: 0
  Gen1 Collections: 0
  Gen2 Collections: 0

Analysis:
  Expected allocations WITHOUT pooling: 25.00 MB
  Expected per iteration: 256.00 KB
  Estimated reduction: 47.3%
  ⚠️  Lower than expected reduction

--- Training Workload Allocation Profile ---
Simulates a mini training loop to measure overall allocation impact.

Steps: 50
Batch size: 32, Hidden size: 256
Total time: 12ms
Avg time per step: 0.256ms

Memory Metrics:
  Total allocations: 3.97 MB
  Allocations per step: 81.32 KB
  Gen0 Collections: 0
  Throughput: 125023 samples/sec

Analysis:
  Expected WITHOUT pooling: 62.50 MB
  Estimated reduction: 93.6%
  ✓ Zero Gen0 collections - excellent memory pressure reduction!


=== Profiling Complete ===
